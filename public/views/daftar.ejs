<!DOCTYPE html>
<html
  lang="en"
  data-pc-preset="preset-1"
  data-pc-sidebar-caption="true"
  data-pc-direction="ltr"
  dir="ltr"
  data-pc-theme="light"
>
  <!-- [Head] start -->

  <head>
    <title>Daftar | <%= project_name %></title>
    <!-- [Meta] -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="description"
      content="Datta Able is trending dashboard template made using Bootstrap 5 design framework. Datta Able is available in Bootstrap, React, CodeIgniter, Angular,  and .net Technologies."
    />
    <meta
      name="keywords"
      content="Bootstrap admin template, Dashboard UI Kit, Dashboard Template, Backend Panel, react dashboard, angular dashboard"
    />
    <meta name="author" content="CodedThemes" />

    <!-- [Favicon] icon -->
    <link rel="icon" href="../assets/images/favicon.svg" type="image/x-icon" />
    <!-- [Font] Family -->
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <!-- [phosphor Icons] https://phosphoricons.com/ -->
    <link rel="stylesheet" href="../assets/fonts/phosphor/duotone/style.css" />
    <!-- [Tabler Icons] https://tablericons.com -->
    <link rel="stylesheet" href="../assets/fonts/tabler-icons.min.css" />
    <!-- [Feather Icons] https://feathericons.com -->
    <link rel="stylesheet" href="../assets/fonts/feather.css" />
    <!-- [Font Awesome Icons] https://fontawesome.com/icons -->
    <link rel="stylesheet" href="../assets/fonts/fontawesome.css" />
    <!-- [Material Icons] https://fonts.google.com/icons -->
    <link rel="stylesheet" href="../assets/fonts/material.css" />
    <!-- [Template CSS Files] -->
    <link
      rel="stylesheet"
      href="../assets/css/style.css"
      id="main-style-link"
    />
    <!-- my custon script -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css"
    />
    <!-- my custon script -->
  </head>
  <!-- [Head] end -->
  <!-- [Body] Start -->

  <body>
    <!-- [ Pre-loader ] start -->
    <div
      class="loader-bg fixed inset-0 bg-white dark:bg-themedark-cardbg z-[1034]"
    >
      <div
        class="loader-track h-[5px] w-full inline-block absolute overflow-hidden top-0"
      >
        <div
          class="loader-fill w-[300px] h-[5px] bg-primary-500 absolute top-0 left-0 animate-[hitZak_0.6s_ease-in-out_infinite_alternate]"
        ></div>
      </div>
    </div>
    <!-- [ Pre-loader ] End -->

    <div class="auth-main relative">
      <div class="auth-wrapper v1 flex items-center w-full h-full min-h-screen">
        <div
          class="auth-form flex items-center justify-center grow flex-col min-h-screen relative p-6"
        >
          <div class="w-full max-w-[350px] relative">
            <div class="auth-bg">
              <span
                class="absolute top-[-100px] right-[-100px] w-[300px] h-[300px] block rounded-full bg-theme-bg-1 animate-[floating_7s_infinite]"
              ></span>
              <span
                class="absolute top-[150px] right-[-150px] w-5 h-5 block rounded-full bg-primary-500 animate-[floating_9s_infinite]"
              ></span>
              <span
                class="absolute left-[-150px] bottom-[150px] w-5 h-5 block rounded-full bg-theme-bg-1 animate-[floating_7s_infinite]"
              ></span>
              <span
                class="absolute left-[-100px] bottom-[-100px] w-[300px] h-[300px] block rounded-full bg-theme-bg-2 animate-[floating_9s_infinite]"
              ></span>
            </div>
            <form id="form">
              <div class="card sm:my-12 w-full shadow-none">
                <div class="card-body !p-10">
                  <div class="text-center mb-8">
                    <a href="#"
                      ><img
                        src="../assets/images/logo-dark.svg"
                        alt="img"
                        class="mx-auto auth-logo"
                    /></a>
                  </div>
                  <h4 class="text-center font-medium mb-4">
                    Sign up pelangganshop.com Inventory & Kasir
                  </h4>
                  <div class="mb-3">
                    <select class="form-control" id="role">
                      <option value="admin">Admin</option>
                      <option value="user">User</option>
                    </select>
                  </div>
                  <div class="grid grid-cols-12 gap-3 mb-3">
                    <div class="col-span-12 sm:col-span-6">
                      <input
                        id="first_name"
                        type="text"
                        class="form-control"
                        placeholder="First Name"
                      />
                    </div>
                    <div class="col-span-12 sm:col-span-6">
                      <input
                        id="last_name"
                        type="text"
                        class="form-control"
                        placeholder="Last Name"
                      />
                    </div>
                  </div>
                  <div class="mb-3">
                    <input
                      id="username"
                      type="text"
                      class="form-control"
                      placeholder="Username"
                    />
                  </div>
                  <div class="mb-3">
                    <input
                      id="password"
                      type="password"
                      class="form-control"
                      placeholder="Password"
                    />
                  </div>
                  <div class="mb-4">
                    <input
                      id="re_password"
                      type="password"
                      class="form-control"
                      placeholder="Confirm Password"
                    />
                  </div>
                  <div class="mb-3">
                    <input
                      id="email"
                      type="email"
                      class="form-control"
                      placeholder="Email Address"
                    />
                  </div>
                  <div class="mb-3">
                    <input
                      id="phone"
                      type="phone"
                      class="form-control"
                      placeholder="Phone Number"
                    />
                  </div>
                  <div class="mb-3">
                    <input
                      id="secret"
                      type="text"
                      class="form-control"
                      placeholder="Kode Rahasia"
                    />
                  </div>
                  <div class="flex mt-1 justify-between items-center flex-wrap">
                    <div class="form-check">
                      <input
                        class="form-check-input input-primary"
                        type="checkbox"
                        id="customCheckc1"
                        checked=""
                      />
                      <label
                        class="form-check-label text-muted"
                        for="customCheckc1"
                        >I agree to all the Terms &amp; Condition</label
                      >
                    </div>
                  </div>
                  <div class="mt-4 text-center">
                    <button
                      type="submit"
                      class="btn btn-primary mx-auto shadow-2xl"
                    >
                      Sign up
                    </button>
                  </div>
                  <div class="flex justify-between items-end flex-wrap mt-4">
                    <h6 class="font-medium mb-0">Already have an Account?</h6>
                    <a href="/login" class="text-primary-500">Login</a>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- [ Main Content ] end -->
    <!-- Required Js -->
    <script src="../assets/js/plugins/simplebar.min.js"></script>
    <script src="../assets/js/plugins/popper.min.js"></script>
    <script src="../assets/js/icon/custom-icon.js"></script>
    <script src="../assets/js/plugins/feather.min.js"></script>
    <script src="../assets/js/component.js"></script>
    <script src="../assets/js/theme.js"></script>
    <script src="../assets/js/script.js"></script>
    <!-- my custon script -->
    <script src="/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>
    <script>
      const notification = new Notyf({
        duration: 5000,
        position: {
          x: "right",
          y: "top",
        },
        types: [
          {
            type: "warning",
            dismissible: true,
          },
          {
            type: "error",
            dismissible: true,
          },
        ],
      });
      const form = $("#form");
      form.on("submit", async function (e) {
        try {
          e.preventDefault();
          if (
            !e.target.role.value ||
            !e.target.first_name.value ||
            !e.target.last_name.value ||
            !e.target.username.value ||
            !e.target.password.value ||
            !e.target.re_password.value ||
            !e.target.email.value ||
            !e.target.phone.value ||
            !e.target.secret.value
          ) {
            throw new Error("Silahkan Masukkan data lengkap !");
          }

          if (e.target.password.value !== e.target.re_password.value) {
            throw new Error("Password Dan Confirm Password Wajib Sama !");
          }
          const response = await fetch("/api/users", {
            method: "POST",
            headers: {
              Accept: "application/json",
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              username: e.target.username.value,
              password: e.target.password.value,
              role: e.target.role.value,
              nama: e.target.first_name.value + " " + e.target.last_name.value,
              email: e.target.email.value,
              phone: e.target.phone.value,
              secret: e.target.secret.value,
            }),
          });
          const responseJson = await response.json();
          if (responseJson?.error) {
            throw new Error(responseJson.message);
          }
          notification.success(responseJson.message);
          setTimeout(() => {
            window.location.href = "/login";
          }, 3000);
        } catch (error) {
          notification.error(error.message);
        }
      });
    </script>
    <!-- my custon script -->
    <div class="floting-button fixed bottom-[50px] right-[30px] z-[1030]"></div>

    <script>
      layout_change("false");
    </script>

    <script>
      layout_theme_sidebar_change("dark");
    </script>

    <script>
      change_box_container("false");
    </script>

    <script>
      layout_caption_change("true");
    </script>

    <script>
      layout_rtl_change("false");
    </script>

    <script>
      preset_change("preset-1");
    </script>

    <script>
      main_layout_change("vertical");
    </script>
  </body>
  <!-- [Body] end -->
</html>
